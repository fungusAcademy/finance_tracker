{% extends 'base.html' %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto; padding: 20px;">
    <h1>{% if object %}‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é{% else %}‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é{% endif %}</h1>
    
    <div style="margin-bottom: 20px;">
        <a href="{% url 'transaction_list' %}" style="text-decoration: none; color: #007bff;">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</a>
    </div>

    <form method="post" style="background: #f8f9fa; padding: 25px; border-radius: 8px; border: 1px solid #dee2e6;">
        {% csrf_token %}
        
        <!-- TYPE-->
        <div style="margin-bottom: 20px;">
            <label for="id_type" style="display: block; margin-bottom: 5px; font-weight: bold;">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏:</label>
            {{ form.type }}
            {% if form.type.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">
                {% for error in form.type.errors %}
                <span>‚ö†Ô∏è {{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <!-- SUM -->
        <div style="margin-bottom: 20px;">
            <label for="id_amount" style="display: block; margin-bottom: 5px; font-weight: bold;">–°—É–º–º–∞ (—Ä—É–±.):</label>
            {{ form.amount }}
            {% if form.amount.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">
                {% for error in form.amount.errors %}
                <span>‚ö†Ô∏è {{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <!-- CATEGORY -->
        <div style="margin-bottom: 20px;">
            <label for="id_category" style="display: block; margin-bottom: 5px; font-weight: bold;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
            {{ form.category }}
            <small style="color: #6c757d; display: block; margin-top: 5px;">
                üí° –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –≤–∞—à–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            </small>
            {% if form.category.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">
                {% for error in form.category.errors %}
                <span>‚ö†Ô∏è {{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <!-- DATE -->
        <div style="margin-bottom: 20px;">
            <label for="id_date" style="display: block; margin-bottom: 5px; font-weight: bold;">–î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏:</label>
            {{ form.date }}
            {% if form.date.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">
                {% for error in form.date.errors %}
                <span>‚ö†Ô∏è {{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <!-- DESCRIPTION -->
        <div style="margin-bottom: 25px;">
            <label for="id_description" style="display: block; margin-bottom: 5px; font-weight: bold;">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            {{ form.description }}
            {% if form.description.errors %}
            <div style="color: #dc3545; font-size: 0.9em; margin-top: 5px;">
                {% for error in form.description.errors %}
                <span>‚ö†Ô∏è {{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <!-- BUTTONS -->
        <div style="display: flex; gap: 10px;">
            <button type="submit" style="padding: 12px 30px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em;">
                üíæ {% if object %}–û–±–Ω–æ–≤–∏—Ç—å{% else %}–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é{% endif %}
            </button>
            <a href="{% url 'transaction_list' %}" style="padding: 12px 30px; background: #6c757d; color: white; text-decoration: none; border-radius: 5px; text-align: center;">
                ‚ùå –û—Ç–º–µ–Ω–∞
            </a>
        </div>
    </form>

    <!-- HINTS -->
    <div style="margin-top: 25px; padding: 15px; background: #e7f3ff; border-radius: 5px; border-left: 4px solid #007bff;">
        <h4 style="margin-top: 0;">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏:</h4>
        <ul style="margin-bottom: 0;">
            <li>–°—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º</li>
            <li>–î–∞—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º</li>
            <li>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏ (–¥–æ—Ö–æ–¥/—Ä–∞—Å—Ö–æ–¥)</li>
        </ul>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Autoformat sum
    const amountField = document.querySelector('#id_amount');
    if (amountField) {
        amountField.addEventListener('blur', function() {
            if (this.value) {
                const value = parseFloat(this.value);
                if (!isNaN(value)) {
                    this.value = value.toFixed(2);
                }
            }
        });
    }
    
    // Set today date by default
    const dateField = document.querySelector('#id_date');
    if (dateField && !dateField.value) {
        dateField.value = new Date().toISOString().split('T')[0];
    }
});
</script>
{% endblock %}